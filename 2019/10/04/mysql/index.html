<!DOCTYPE html>
<html lang="zh-Hans>">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    
    
    <meta name="google-site-verification"
          content="c66gcm0iMw487a2YC6w7cFbrhhe_Mh_vVNC6Pt3Dak8">
    

    
    
    <meta name="theme-color" content="#f9f9f9">
    

    
    

    
    <title>
        
        centos7编译安装mariadb10.1.8
        &nbsp;|&nbsp;
        
        君子不器
    </title>

    
    
    <link type="image/x-icon" rel="shortcut icon"
          href="/favicon.png">
    

    
    
    <link rel="author" content="/humans.txt">
    

    
     
<link rel="stylesheet" href="/css/style.css">


<meta name="generator" content="Hexo 5.3.0"></head>


<body>

<div class="body-wrapper">
    <header>
    <div class="container">

        
        <div>
            <h1 class="logo">
                <a href="/">
                    君子不器
                </a>
            </h1>
        </div>

        
        <nav class="navbar">
            <ul class="navbar-menus">
                
                <li class="navbar-menus-item">
                    <a href="/">
                        
                        Home
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/archives">
                        
                        archives
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/tags">
                        
                        Tags
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/about">
                        
                        About
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/categories">
                        
                        Categories
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/link">
                        
                        link
                    </a>
                </li>
                
                <li class="navbar-menus-item">
                    <a href="/search">
                        
                        search
                    </a>
                </li>
                
            </ul>
        </nav>

    </div>
</header>


    <div class="main">
    <div class="container">

        <article class="post-body">

    <div class="title">
        <h1 class="title-inner">
            centos7编译安装mariadb10.1.8
        </h1>

        <div class="title-meta">
            <span class="title-meta-time">
                2019-10-04
            </span>
        </div>
    </div>

    <div class="content">

        
        
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BE%8E%E5%A5%BD%E7%9A%84%E6%84%9F%E8%A7%89%E5%B9%B6%E4%B8%8D%E8%83%BD%E8%AE%A9%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E7%9C%9F%E6%AD%A3%E7%BE%8E%E5%A5%BD%E8%B5%B7%E6%9D%A5"><span class="toc-text">美好的感觉并不能让这个世界真正美好起来 </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#centos7%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85mariadb"><span class="toc-text">centos7编译安装mariadb</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-text">安装依赖包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85cmake"><span class="toc-text">编译安装cmake</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85mariadb-10-1-8"><span class="toc-text">安装mariadb 10.1.8</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mysql-5-7%E7%BC%96%E8%AF%91%E5%8F%82%E6%95%B0"><span class="toc-text">mysql 5.7编译参数</span></a></li></ol>
        

        <h4 id="美好的感觉并不能让这个世界真正美好起来"><a href="#美好的感觉并不能让这个世界真正美好起来" class="headerlink" title="美好的感觉并不能让这个世界真正美好起来 "></a>美好的感觉并不能让这个世界真正美好起来 <a id="more"></a></h4><h4 id="centos7编译安装mariadb"><a href="#centos7编译安装mariadb" class="headerlink" title="centos7编译安装mariadb"></a>centos7编译安装mariadb</h4><h4 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h4><p>yum -y install gcc-c++ ncurses-devel bison libxml2-devel cmake</p>
<h4 id="编译安装cmake"><a href="#编译安装cmake" class="headerlink" title="编译安装cmake"></a>编译安装cmake</h4><p>tar -zxvf cmake-3.9.3.tar.gz -C /usr/local  解压到指定目录</p>
<p>在cmake目录下执行./configure  make &amp;&amp; make install ，编译安装</p>
<h4 id="安装mariadb-10-1-8"><a href="#安装mariadb-10-1-8" class="headerlink" title="安装mariadb 10.1.8"></a>安装mariadb 10.1.8</h4><p>groupadd mysql  #添加MariaDB数据库安装用户组mysql</p>
<p>useradd -g mysql mysql -s /bin/false  #创建用户mysql并加入到mysql组，不允许mysql用户直接登录系统</p>
<p>mkdir -p /home/mysql/data  #创建MariaDB数据库存放目录</p>
<p>chown -R mysql:mysql /home/mysql/data   #设置MariaDB数据库目录权限</p>
<p>解压mariadb安装包到指定路径</p>
<p>tar -zxvf mariadb-10.1.8.tar.gz -C /home/</p>
<p>进入解压后的文件目录编译安装</p>
<p>cmake . -DCMAKE_INSTALL_PREFIX=/home/mysql  -DMYSQL_DATADIR=/home/mysql/data  -DSYSCONFDIR=/etc  </p>
<p>make &amp;&amp; make install</p>
<p>cmake编译报错 /usr/bin/c++ doesn’t support -std=c++11 or -std=c++0x, you need one that does</p>
<p>加入参数 -DPLUGIN_TOKUDB=NO，删除CMakeCache.txt  在mariadb原目录下。在重新执行命令编译安装</p>
<p>拷贝配置文件</p>
<p>cp ./support-files/my-huge.cnf  /etc/my.cnf</p>
<p>vi /etc/my.cnf 编辑配置文件,在 [mysqld] 部分增加</p>
<p>datadir = /home/mysql/data</p>
<p>basedir = /home/mysql</p>
<p>把MariaDB加入系统启动</p>
<p>cp ./support-files/mysql.server  /etc/rc.d/init.d/mysqld </p>
<p>chmod 755 /etc/init.d/mysqld #增加执行权限</p>
<p>chkconfig mysqld on #加入开机启动</p>
<p>编辑，vi /etc/rc.d/init.d/mysqld</p>
<p>basedir = /home/mysql   #MariaDB程序安装路径</p>
<p>datadir = /home/mysql/data  #MariaDB数据库存放目录</p>
<p>生成MariaDB系统数据库</p>
<p>./scripts/mysql_install_db –user=mysql –basedir=/home/mysql –datadir=/home/mysql/data</p>
<p>把MariaDB服务加入系统环境变量：在最后添加下面这一行</p>
<p>export PATH=$PATH:/home/mysql/bin</p>
<p>生效环境变量，source /etc/profile</p>
<p>启动mariadb</p>
<p>service mysqld start </p>
<h4 id="mysql-5-7编译参数"><a href="#mysql-5-7编译参数" class="headerlink" title="mysql 5.7编译参数"></a>mysql 5.7编译参数</h4><p>cmake -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci -DWITH_BOOST=boost -DCMAKE_INSTALL_PREFIX=/home/mysql -DMYSQL_DATADIR=/home/mysql/data  -DSYSCONFDIR=/etc</p>

    </div>

    
    
    
    

    
    
    
    

</article>

<div class="prev-next">
    <div class="wrapper">

        
        
        <div class="prev">
            <a href="/2019/10/10/%E9%A1%BB%E7%9F%A5%E5%B0%91%E6%97%B6%E5%87%8C%E4%BA%91%E5%BF%97/">
                < Newer
            </a>
        </div>
        

        
        
        <div class="next">
            <a href="/2019/07/01/base/">
                Older >
            </a>
        </div>
        

    </div>
</div>



    </div>
</div>

</div>

<footer>
    <div class="container text-center">

        
        <p class="copyright">
            <span>&copy; 2015 - 2017</span>
            <span> / </span>
            <span><a href="http://varzy.me" target="_blank">Aiden Zhao</a></span>
        </p>

    </div>
</footer>


</body>

</html>
